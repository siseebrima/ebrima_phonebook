(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(17),a=t.n(r),o=t(8),u=t(3),i=t(0),d=function(e){var n=e.person,t=e.handleDelete;return Object(i.jsx)("div",{children:Object(i.jsxs)("p",{children:[n.name," ",n.number,Object(i.jsx)("button",{onClick:function(){return t(n.id)},children:"delete"})]})})},s=function(e){var n=e.toShow,t=e.handleDelete;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Numbers"}),n.map((function(e){return Object(i.jsx)(d,{person:e,handleDelete:function(){return t(e.id)}},e.id)}))]})},l=function(e){var n=e.searched,t=e.handleSearch;return Object(i.jsx)("div",{children:Object(i.jsxs)("p",{children:["filter shown with a"," ",Object(i.jsx)("input",{type:"text",value:n,onChange:t})]})})},b=function(e){var n=e.handleForm,t=e.newName,c=e.handleInput,r=e.newNumber,a=e.handleNumber;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:c})]}),Object(i.jsxs)("div",{children:["number:"," ",Object(i.jsx)("input",{type:"text",value:r,onChange:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})]})},j=function(e){var n=e.message,t=e.success;return Object(i.jsx)("div",{children:null===n?null:Object(i.jsx)("div",{className:"success",style:t?{color:"green",fontSize:22,borderRadius:10,background:"#dfe6e1",border:"solid green"}:{color:"red",fontSize:22,borderRadius:10,background:"#dfe6e1",border:"solid red"},children:n})})},h=t(4),f=t.n(h),O="/api/persons",m={getAll:function(){return f.a.get(O).then((function(e){return e.data}))},create:function(e){return f.a.post(O,e).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e,n){return f.a.delete("".concat(O,"/").concat(e),n).then((function(e){return e.data}))}},v=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),d=Object(u.a)(a,2),h=d[0],f=d[1],O=Object(c.useState)(""),v=Object(u.a)(O,2),p=v[0],x=v[1],g=Object(c.useState)(""),w=Object(u.a)(g,2),S=w[0],k=w[1],y=Object(c.useState)(null),N=Object(u.a)(y,2),C=N[0],D=N[1],A=Object(c.useState)(null),I=Object(u.a)(A,2),z=I[0],E=I[1];Object(c.useEffect)((function(){m.getAll().then((function(e){r(e)})).catch((function(e){return console.error(e)}))}),[]);var F=t?t.filter((function(e){var n;return null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(null===S||void 0===S?void 0:S.toLowerCase())})):[];return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(j,{message:C,success:z}),Object(i.jsx)(l,{searched:S,handleSearch:function(e){k(e.target.value)}}),Object(i.jsx)(b,{handleForm:function(e){e.preventDefault();var n={name:h,number:p},c=t.find((function(e){return e.name===h}));!c&&h.length>0&&p.length>0?m.create(n).then((function(e){E(!0),D("Added ".concat(e.name)),setTimeout((function(){D(null)}),4e3),r(t.concat(e))})):c?(window.confirm("there is already a number for this contact, update?"),m.update(c.id,Object(o.a)(Object(o.a)({},c),{},{number:p})).then((function(e){return r(t.map((function(n){return n.id!==c.id?n:e})))})).catch((function(e){E(!1),D("information of ".concat(c.name," has already been removed")),setTimeout((function(){D(null)}),4e3)}))):alert("".concat(h," and ").concat(p," is already added to phonebook")),f(""),x("")},handleInput:function(e){f(e.target.value)},handleNumber:function(e){x(e.target.value)},newName:h,newNumber:p}),Object(i.jsx)(s,{toShow:F,handleDelete:function(e){var n=t.find((function(n){return n.id===e}));m.remove(e,n).then((function(c){window.confirm("Delete ".concat(n.name,"?")),r(t.filter((function(n){return n.id!==e})))}))}})]})};a.a.render(Object(i.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.d61cf336.chunk.js.map